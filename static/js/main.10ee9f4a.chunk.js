(this.webpackJsonpr3f_homunculus=this.webpackJsonpr3f_homunculus||[]).push([[0],{58:function(e,n,t){},79:function(e,n,t){"use strict";t.r(n);t(58);var r=t(0),a=t.n(r),i=t(26),s=t.n(i),o=t(84),c=t(85),u=t(18),v=t(10),l=t(46),d=t(83),h=t(81),_=t(45),m=t(15);Object(u.d)({ShaderPass:_.a});var f=function(e){var n=e.enabled,t=void 0===n||n,a=e.progress,i=void 0===a?0:a,s=e.scale,o=void 0===s?1:s,c=Object(r.useRef)(null),v=Object(r.useMemo)((function(){return{uniforms:{tDiffuse:{value:null},u_time:{value:0},u_progress:{value:0},u_scale:{value:1}},vertexShader:p,fragmentShader:g}}),[]);return Object(u.e)((function(){c.current.uniforms.u_time.value+=.01})),Object(m.jsx)("shaderPass",{ref:c,attachArray:"passes",args:[v],enabled:t,"uniforms-u_progress-value":i,"uniforms-u_scale-value":o})},p="\nvarying vec2 v_uv;\n\nvoid main() {\n  v_uv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",g="\nuniform sampler2D tDiffuse;\nuniform float u_time;\nuniform float u_progress;\nuniform float u_scale;\nvarying vec2 v_uv;\n\nvoid main() {\n  vec2 uv = v_uv;\n\n  vec2 p = 2.0 * v_uv - 1.0; // -1 ~ 1\n  p += 0.1 * cos(u_scale * 3.7 * p.yx + 1.4 * u_time + vec2(2.2, 3.4));\n  p += 0.1 * cos(u_scale * 3.0 * p.yx + 1.0 * u_time + vec2(1.2, 3.4));\n  p += 0.3 * cos(u_scale * 5.0 * p.yx + 2.6 * u_time + vec2(4.2, 1.4));\n  p += 0.3 * cos(u_scale * 7.5 * p.yx + 3.6 * u_time + vec2(12.2, 3.4));\n\n\tuv.x = mix(v_uv.x, length(p), u_progress);\n  uv.y = mix(v_uv.y, 0.5 * length(p) + 0.15, u_progress);\n  \n  vec4 color = texture2D(tDiffuse, uv);\n  gl_FragColor = color;\n\n  // gl_FragColor = vec4(length(p), 0.0, 0.0, 1.0);\n\t// gl_FragColor = vec4(uv, 0.0, 1.0);\n}\n",j=t(80),b=t(2),x=t(1),w=t(7),O=Object(b.a)((function e(n){var t=this;Object(x.a)(this,e),this._texture=n,this._scene=void 0,this._target=void 0,this._camera=void 0,this._meshs=[],this._max=100,this._frequency=5,this._mouse=new w.Vector2(0,0),this._prevMouse=new w.Vector2(0,0),this._currentWave=0,this._cameraProps=function(){var e=window.innerHeight;return{width:e*(window.innerWidth/window.innerHeight)/2,height:e/2,near:-1e3,far:1e3}},this._createMesh=function(){for(var e=new w.PlaneGeometry(64,64),n=new w.MeshBasicMaterial({map:t._texture,transparent:!0,blending:w.AdditiveBlending,depthTest:!1,depthWrite:!1}),r=0;r<t._max;r++){var a=new w.Mesh(e.clone(),n.clone());a.rotateZ(2*Math.PI*Math.random()),a.visible=!1,t._scene.add(a),t._meshs.push(a)}},this._handleMouseMove=function(e){t._mouse.x=e.clientX-window.innerWidth/2,t._mouse.y=window.innerHeight/2-e.clientY},this._handleResize=function(){var e=t._cameraProps(),n=e.width,r=e.height;t._camera.left=-n,t._camera.right=n,t._camera.top=r,t._camera.bottom=-r,t._camera.updateProjectionMatrix(),t._target.setSize(window.innerWidth,window.innerHeight)},this._setNewWave=function(){var e=t._meshs[t._currentWave];e.visible=!0,e.position.set(t._mouse.x,t._mouse.y,0),e.scale.x=e.scale.y=.2,e.material.opacity=.5},this._trackMousePos=function(){var e=t._mouse.distanceTo(t._prevMouse);t._frequency<e&&(t._setNewWave(),t._currentWave=(t._currentWave+1)%t._max),t._prevMouse.x=t._mouse.x,t._prevMouse.y=t._mouse.y},this.update=function(e,n){t._trackMousePos(),e.setRenderTarget(t._target),e.render(t._scene,t._camera),n.value=t._target.texture,e.setRenderTarget(null),e.clear(),t._meshs.forEach((function(e){if(e.visible){var n=e.material;e.rotation.z+=.02,n.opacity*=.97,e.scale.x=.98*e.scale.x+.17,e.scale.y=e.scale.x,n.opacity<.002&&(e.visible=!1)}}))},this.dispose=function(){window.removeEventListener("mousemove",t._handleMouseMove),window.removeEventListener("resize",t._handleResize)},this._scene=new w.Scene,this._target=new w.WebGLRenderTarget(window.innerWidth,window.innerHeight);var r=this._cameraProps(),a=r.width,i=r.height,s=r.near,o=r.far;this._camera=new w.OrthographicCamera(-a,a,i,-i,s,o),this._camera.position.set(0,0,2),this._createMesh(),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("resize",this._handleResize)}));Object(u.d)({ShaderPass:_.a});var M=function(e){var n=e.enabled,t=void 0===n||n;return Object(m.jsx)(r.Suspense,{fallback:null,children:Object(m.jsx)(y,{enabled:t})})},y=function(e){var n=e.enabled,t=void 0===n||n,a=Object(r.useRef)(null),i=Object(j.a)("/assets/textures/brush.png"),s=Object(r.useMemo)((function(){return new O(i)}),[i]),o=Object(r.useMemo)((function(){return{uniforms:{tDiffuse:{value:null},u_displacement:{value:null}},vertexShader:P,fragmentShader:D}}),[]);return Object(r.useEffect)((function(){return function(){return s.dispose()}}),[s]),Object(u.e)((function(e){var n=e.gl;s.update(n,a.current.uniforms.u_displacement)})),Object(m.jsx)("shaderPass",{ref:a,attachArray:"passes",args:[o],enabled:t})},P="\nvarying vec2 v_uv;\n\nvoid main() {\n  v_uv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",D="\nuniform sampler2D tDiffuse;\nuniform sampler2D u_displacement;\nvarying vec2 v_uv;\n\nfloat PI = 3.141592653589;\n\nvoid main() {\n  vec2 uv = v_uv;\n\n  vec4 disp = texture2D(u_displacement, uv);\n  float theta = disp.r * 2.0 * PI;\n  vec2 dir = vec2(sin(theta), cos(theta));\n  uv += dir * disp.r * 0.1;\n\n  vec4 color = texture2D(tDiffuse, uv);\n\n  gl_FragColor = color;\n  // gl_FragColor = texture2D(u_displacement, v_uv);\n  // gl_FragColor = vec4(v_uv, 0.0, 1.0);\n}\n";Object(u.d)({EffectComposer:d.a,RenderPass:h.a,ShaderPass:_.a});var S=function(){var e=Object(l.a)("Distortion",{enabled:!0,progress:{value:0,min:0,max:1,step:.01},scale:{value:1,min:0,max:5,step:.01}}),n=Object(l.a)("Ripple",{enabled:!0}),t=Object(r.useRef)(null),a=Object(u.g)(),i=a.gl,s=a.scene,o=a.camera,c=a.size;return Object(r.useEffect)((function(){t.current.setSize(c.width,c.height)}),[c]),Object(u.e)((function(){t.current.render()}),1),Object(m.jsxs)("effectComposer",{ref:t,args:[i],children:[Object(m.jsx)("renderPass",{attachArray:"passes",args:[s,o]}),Object(m.jsx)(f,Object(v.a)({},e)),Object(m.jsx)(M,Object(v.a)({},n))]})},C=t(82),W=function(){var e=function(e){return"/assets/images/".concat(e,".jpg")},n=Object(j.a)([e("thum1"),e("thum2"),e("thum3")]),t=function(e){return new w.ShaderMaterial({uniforms:{u_texture:{value:e}},vertexShader:F,fragmentShader:R})};return Object(m.jsx)(m.Fragment,{children:n.map((function(e,n){return Object(m.jsx)(C.a,{args:[1,.525],material:t(e),scale:.98,position:[n-1,0,0]},n)}))})},F="\nvarying vec2 v_uv;\n\nvoid main() {\n  v_uv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",R="\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\n\nvoid main() {\n  vec4 color = texture2D(u_texture, v_uv);\n  gl_FragColor = color;\n}\n",z=function(){return Object(m.jsxs)(u.a,{camera:{position:[0,0,2],fov:50,aspect:window.innerWidth/window.innerHeight,near:.1,far:2e3},dpr:window.devicePixelRatio,children:[Object(m.jsx)("color",{attach:"background",args:["#000"]}),Object(m.jsx)(o.a,{attach:"orbitControls"}),Object(m.jsx)(c.a,{}),Object(m.jsx)(r.Suspense,{fallback:null,children:Object(m.jsx)(W,{})}),Object(m.jsx)(S,{})]})},E=function(){return Object(m.jsx)("div",{style:{width:"100vw",height:"100vh"},children:Object(m.jsx)(z,{})})},k=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,86)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,s=n.getTTFB;t(e),r(e),a(e),i(e),s(e)}))};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(E,{})}),document.getElementById("root")),k()}},[[79,1,2]]]);
//# sourceMappingURL=main.10ee9f4a.chunk.js.map